<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Cirkel verdelen in punten</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #ffffff;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    #circleCanvas {
      display: block;
      width: 100vw;
      height: 100vh;
    }

    .controls {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 10;
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid #cccccc;
      border-radius: 8px;
      padding: 8px 12px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    .controls input[type="number"] {
      width: 80px;
      padding: 4px;
      font-size: 14px;
    }

    .controls button {
      padding: 4px 10px;
      font-size: 14px;
      cursor: pointer;
      border-radius: 6px;
      border: 1px solid #333333;
      background: #f5f5f5;
    }

    .controls button:hover {
      filter: brightness(0.95);
    }
  </style>
</head>
<body>
  <div class="controls">
    <label for="pointsInput">Aantal punten:</label>
    <input type="number" id="pointsInput" min="1" value="24" />
    <button id="generateBtn">Genereer</button>
    <button id="saveBtn">Sla op</button>
  </div>

  <canvas id="circleCanvas"></canvas>

  <script>
    const canvas = document.getElementById("circleCanvas");
    const ctx = canvas.getContext("2d");

    const pointsInput = document.getElementById("pointsInput");
    const generateBtn = document.getElementById("generateBtn");
    const saveBtn = document.getElementById("saveBtn");

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      drawCircle();
    }

    window.addEventListener("resize", resizeCanvas);

    function drawCircle() {
      const n = parseInt(pointsInput.value, 10);

      if (!Number.isFinite(n) || n < 1) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        return;
      }

      // Witte achtergrond
      ctx.fillStyle = "#ffffff";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      const cx = canvas.width / 2;
      const cy = canvas.height / 2;
      const radius = Math.min(canvas.width, canvas.height) * 0.4;

      ctx.strokeStyle = "#000000";
      ctx.lineWidth = 2;

      // Cirkel
      ctx.beginPath();
      ctx.arc(cx, cy, radius, 0, Math.PI * 2);
      ctx.stroke();

      // Lijnen vanaf het middelpunt
      for (let i = 0; i < n; i++) {
        const angle = (i / n) * Math.PI * 2;
        const x = cx + radius * Math.cos(angle);
        const y = cy + radius * Math.sin(angle);

        ctx.beginPath();
        ctx.moveTo(cx, cy);
        ctx.lineTo(x, y);
        ctx.stroke();
      }
    }

    generateBtn.addEventListener("click", drawCircle);

    // Enter in het invoerveld triggert ook genereren
    pointsInput.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        drawCircle();
      }
    });

    // Opslaan als JPG
    saveBtn.addEventListener("click", () => {
      const link = document.createElement("a");
      const n = parseInt(pointsInput.value, 10);
      const safeN = Number.isFinite(n) && n > 0 ? n : "onbekend";

      link.download = `cirkel_${safeN}_punten.jpg`;
      link.href = canvas.toDataURL("image/jpeg", 0.95);
      link.click();
    });

    // Initieel canvas op maat maken en eerste cirkel tekenen
    resizeCanvas();
  </script>
</body>
</html>
